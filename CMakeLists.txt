CMAKE_MINIMUM_REQUIRED(VERSION 2.8)

PROJECT (zzip C)
SET (SRC_VER "0.13.65")

OPTION (BUILD_ZLIB "Build dependency ZLIB" OFF)

if (APPLE)
  SET( ZZIP_LIBRARY ${CMAKE_BINARY_DIR}/zzip/libzzip_la.a)
  SET( ZZIPFSEEKO_LIBRARY ${CMAKE_BINARY_DIR}/zzip/libzzipfseeko_la.a)
  SET( ZZIPMAPPED_LIBRARY ${CMAKE_BINARY_DIR}/zzip/libzzipmapped_la.a)
elseif(CYGWIN)
  SET( ZZIP_LIBRARY ${CMAKE_BINARY_DIR}/zzip/cygzzip_la.a)
  SET( ZZIPFSEEKO_LIBRARY ${CMAKE_BINARY_DIR}/zzip/cygzzipfseeko_la.a)
  SET( ZZIPMAPPED_LIBRARY ${CMAKE_BINARY_DIR}/zzip/cygzzipmapped_la.a)
elseif(MSVC)
  SET( ZZIP_LIBRARY ${CMAKE_BINARY_DIR}/zzip/${CMAKE_BUILD_TYPE}/zzip_la.lib)
  SET( ZZIPFSEEKO_LIBRARY ${CMAKE_BINARY_DIR}/zzip/${CMAKE_BUILD_TYPE}/zzipfseeko_la.lib)
  SET( ZZIPMAPPED_LIBRARY ${CMAKE_BINARY_DIR}/zzip/${CMAKE_BUILD_TYPE}/zzipmapped_la.lib)
else ()
  SET( ZZIP_LIBRARY ${CMAKE_BINARY_DIR}/zzip/libzzip_la.a)
  SET( ZZIPFSEEKO_LIBRARY ${CMAKE_BINARY_DIR}/zzip/libzzipfseeko_la.a)
  SET( ZZIPMAPPED_LIBRARY ${CMAKE_BINARY_DIR}/zzip/libzzipmapped_la.a)
endif ()

  MESSAGE(STATUS "ZLIB_LIBRARY=${ZLIB_LIBRARY}")
  MESSAGE(STATUS "ZZIP_LIBRARY=${ZZIP_LIBRARY}")
  MESSAGE(STATUS "ZZIPFSEEKO_LIBRARY=${ZZIPFSEEKO_LIBRARY}")
  MESSAGE(STATUS "ZZIPMAPPED_LIBRARY=${ZZIPMAPPED_LIBRARY}")    

IF (BUILD_ZLIB)
ADD_SUBDIRECTORY(zlib)
ENDIF ()

ADD_SUBDIRECTORY(zzip)
ADD_SUBDIRECTORY(bins)
ADD_SUBDIRECTORY(test)
ADD_SUBDIRECTORY(zzipwrap)

IF (BUILD_ZLIB)
ADD_DEPENDENCIES( zzip_la zlib )
ADD_DEPENDENCIES( zzip_la zlibstatic )
ADD_DEPENDENCIES( zzipmapped_la zlib )
ADD_DEPENDENCIES( zzipmapped_la zlibstatic )
ADD_DEPENDENCIES( zzipfseeko_la zlib )
ADD_DEPENDENCIES( zzipfseeko_la zlibstatic )
ENDIF ()
