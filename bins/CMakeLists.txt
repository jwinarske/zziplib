CMAKE_MINIMUM_REQUIRED(VERSION 2.8)
PROJECT (bins C)

SET(CMAKE_MODULE_PATH ${CMAKE_MODULE_PATH} ${CMAKE_CURRENT_SOURCE_DIR}/../cmake)
INCLUDE(Zzip)

IF (BUILD_ZLIB)
INCLUDE_DIRECTORIES (${CMAKE_BINARY_DIR}/zlib)
ENDIF ()
INCLUDE_DIRECTORIES (${ZLIB_INCLUDE_DIR} ${CMAKE_SOURCE_DIR})

ADD_EXECUTABLE(zzcat zzcat.c)
TARGET_LINK_LIBRARIES(zzcat ${ZLIB_LIBRARY} ${ZZIP_LIBRARY})
INSTALL (TARGETS zzcat RUNTIME DESTINATION ${CMAKE_INSTALL_BINDIR} COMPONENT applications)
ADD_DEPENDENCIES( zzcat zzip_la )

ADD_EXECUTABLE(zzdir zzdir.c)
TARGET_LINK_LIBRARIES(zzdir ${ZLIB_LIBRARY} ${ZZIP_LIBRARY})
INSTALL (TARGETS zzdir RUNTIME DESTINATION ${CMAKE_INSTALL_BINDIR} COMPONENT applications)
ADD_DEPENDENCIES( zzdir zzip_la )

ADD_EXECUTABLE(zzxorcat zzxorcat.c)
TARGET_LINK_LIBRARIES(zzxorcat ${ZLIB_LIBRARY} ${ZZIP_LIBRARY})
INSTALL (TARGETS zzxorcat RUNTIME DESTINATION ${CMAKE_INSTALL_BINDIR} COMPONENT applications)
ADD_DEPENDENCIES( zzxorcat zzip_la )

ADD_EXECUTABLE(zzxordir zzxordir.c)
TARGET_LINK_LIBRARIES(zzxordir ${ZLIB_LIBRARY} ${ZZIP_LIBRARY})
INSTALL (TARGETS zzxordir RUNTIME DESTINATION ${CMAKE_INSTALL_BINDIR} COMPONENT applications)
ADD_DEPENDENCIES( zzxordir zzip_la )

ADD_EXECUTABLE(zzxorcopy zzxorcopy.c)
TARGET_LINK_LIBRARIES(zzxorcopy ${ZLIB_LIBRARY} ${ZZIP_LIBRARY})
INSTALL (TARGETS zzxorcopy RUNTIME DESTINATION ${CMAKE_INSTALL_BINDIR} COMPONENT applications)
ADD_DEPENDENCIES( zzxorcopy zzip_la )

ADD_EXECUTABLE(unzzip unzzip.c unzzipcat-zip.c unzzipdir-zip.c)
TARGET_LINK_LIBRARIES(unzzip ${ZLIB_LIBRARY} ${ZZIP_LIBRARY})
INSTALL (TARGETS unzzip RUNTIME DESTINATION ${CMAKE_INSTALL_BINDIR} COMPONENT applications)
ADD_DEPENDENCIES( unzzip zzip_la )

ADD_EXECUTABLE(unzzip-mix unzzip.c unzzipcat-mix.c unzzipdir-mix.c)
TARGET_LINK_LIBRARIES(unzzip-mix ${ZLIB_LIBRARY} ${ZZIP_LIBRARY})
INSTALL (TARGETS unzzip-mix RUNTIME DESTINATION ${CMAKE_INSTALL_BINDIR} COMPONENT applications)
ADD_DEPENDENCIES( unzzip-mix zzip_la )

ADD_EXECUTABLE(unzzip-mem unzzip.c unzzipcat-mem.c unzzipdir-mem.c)
TARGET_LINK_LIBRARIES(unzzip-mem ${ZLIB_LIBRARY} ${ZZIPMAPPED_LIBRARY})
INSTALL (TARGETS unzzip-mem RUNTIME DESTINATION ${CMAKE_INSTALL_BINDIR} COMPONENT applications)
ADD_DEPENDENCIES( unzzip-mem zzipmapped_la )

ADD_EXECUTABLE(unzzip-big unzzip.c unzzipcat-big.c unzzipdir-big.c)
TARGET_LINK_LIBRARIES(unzzip-big ${ZLIB_LIBRARY} ${ZZIPFSEEKO_LIBRARY})
INSTALL (TARGETS unzzip-big RUNTIME DESTINATION ${CMAKE_INSTALL_BINDIR} COMPONENT applications)
ADD_DEPENDENCIES( unzzip-big zzipfseeko_la )

ADD_EXECUTABLE(unzip-mem unzip-mem.c)
TARGET_LINK_LIBRARIES(unzip-mem ${ZLIB_LIBRARY} ${ZZIPMAPPED_LIBRARY})
INSTALL (TARGETS unzip-mem RUNTIME DESTINATION ${CMAKE_INSTALL_BINDIR} COMPONENT applications)
ADD_DEPENDENCIES( unzip-mem zzipmapped_la )

# non-install apps
ADD_EXECUTABLE(zziptest zziptest.c)
TARGET_LINK_LIBRARIES(zziptest ${ZLIB_LIBRARY} ${ZZIP_LIBRARY})
ADD_DEPENDENCIES( zziptest zzip_la )

ADD_EXECUTABLE(zzobfuscated zzobfuscated.c)
TARGET_LINK_LIBRARIES(zzobfuscated ${ZLIB_LIBRARY} ${ZZIP_LIBRARY})
ADD_DEPENDENCIES( zzobfuscated zzip_la )

ADD_EXECUTABLE(zzip zzip.c zzipmake-zip.c)
TARGET_LINK_LIBRARIES(zzip ${ZLIB_LIBRARY} ${ZZIP_LIBRARY})
ADD_DEPENDENCIES( zzip zzip_la )


set(CPACK_COMPONENTS_ALL applications)

