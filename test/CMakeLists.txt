CMAKE_MINIMUM_REQUIRED(VERSION 2.8)
PROJECT (test C)

SET(CMAKE_MODULE_PATH ${CMAKE_MODULE_PATH} ${CMAKE_CURRENT_SOURCE_DIR}/../cmake)
INCLUDE(Zzip)

IF (BUILD_ZLIB)
INCLUDE_DIRECTORIES (${CMAKE_BINARY_DIR}/zlib)
ENDIF ()
INCLUDE_DIRECTORIES (${ZLIB_INCLUDE_DIR} ${CMAKE_SOURCE_DIR})

ADD_EXECUTABLE(zzipself zzipself.c)
TARGET_LINK_LIBRARIES(zzipself ${ZLIB_LIBRARY} ${ZZIP_LIBRARY})
INSTALL (TARGETS zzipself RUNTIME DESTINATION ${CMAKE_INSTALL_BINDIR} COMPONENT applications)
ADD_DEPENDENCIES( zzipself zzip_la )

ADD_EXECUTABLE(zzipsetstub zzipsetstub.c)
TARGET_LINK_LIBRARIES(zzipsetstub ${ZLIB_LIBRARY} ${ZZIP_LIBRARY})
INSTALL (TARGETS zzipsetstub RUNTIME DESTINATION ${CMAKE_INSTALL_BINDIR} COMPONENT applications)
ADD_DEPENDENCIES( zzipsetstub zzip_la )

set(CPACK_COMPONENTS_ALL applications)

